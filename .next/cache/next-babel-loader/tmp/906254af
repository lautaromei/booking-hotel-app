{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { toast } from 'react-toastify';\nimport ButtonLoader from '../layout/ButtonLoader';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { registerUser, clearErrors } from '../../redux/actions/userActions';\n\nconst Register = () => {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const {\n    0: user,\n    1: setUser\n  } = useState({\n    name: '',\n    email: '',\n    password: ''\n  });\n  const {\n    name,\n    email,\n    password\n  } = user;\n  const {\n    0: avatar,\n    1: setAvatar\n  } = useState('');\n  const {\n    0: avatarPreview,\n    1: setAvatarPreview\n  } = useState('/images/default_avatar.jpg');\n  const {\n    success,\n    error,\n    loading\n  } = useSelector(state => state.auth);\n  useEffect(() => {\n    if (success) {\n      router.push('/login');\n    }\n\n    if (error) {\n      toast.error(error);\n      dispatch(clearErrors());\n    }\n  }, [dispatch, success, error]);\n\n  const submitHandler = e => {\n    e.preventDefault();\n    const userData = {\n      name,\n      email,\n      password,\n      avatar\n    };\n    dispatch(registerUser(userData));\n  };\n\n  const onChange = e => {\n    if (e.target.name === 'avatar') {\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        if (reader.readyState === 2) {\n          setAvatar(reader.result);\n          setAvatarPreview(reader.result);\n        }\n      };\n\n      reader.readAsDataURL(e.target.files[0]);\n    } else {\n      setUser(_objectSpread(_objectSpread({}, user), {}, {\n        [e.target.name]: e.target.value\n      }));\n    }\n  };\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: \"container container-fluid\",\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"row wrapper\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-10 col-lg-5\",\n        children: /*#__PURE__*/_jsxs(\"form\", {\n          className: \"shadow-lg\",\n          onSubmit: submitHandler,\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            className: \"mb-3\",\n            children: \"Join Us\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsx(\"label\", {\n              htmlFor: \"name_field\",\n              children: \"Full Name\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"text\",\n              id: \"name_field\",\n              className: \"form-control\",\n              name: \"name\",\n              value: name,\n              onChange: onChange\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsx(\"label\", {\n              htmlFor: \"email_field\",\n              children: \"Email\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"email\",\n              id: \"email_field\",\n              className: \"form-control\",\n              name: \"email\",\n              value: email,\n              onChange: onChange\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsx(\"label\", {\n              htmlFor: \"password_field\",\n              children: \"Password\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"password\",\n              id: \"password_field\",\n              className: \"form-control\",\n              name: \"password\",\n              value: password,\n              onChange: onChange\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsx(\"label\", {\n              htmlFor: \"avatar_upload\",\n              children: \"Avatar\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"d-flex align-items-center\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                children: /*#__PURE__*/_jsx(\"figure\", {\n                  className: \"avatar mr-3 item-rtl\",\n                  children: /*#__PURE__*/_jsx(\"img\", {\n                    src: avatarPreview,\n                    className: \"rounded-circle\",\n                    alt: \"image\"\n                  })\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"custom-file\",\n                children: [/*#__PURE__*/_jsx(\"input\", {\n                  type: \"file\",\n                  name: \"avatar\",\n                  className: \"custom-file-input\",\n                  id: \"customFile\",\n                  accept: \"images/*\",\n                  onChange: onChange\n                }), /*#__PURE__*/_jsx(\"label\", {\n                  className: \"custom-file-label\",\n                  htmlFor: \"customFile\",\n                  children: \"Choose Avatar\"\n                })]\n              })]\n            })]\n          }), /*#__PURE__*/_jsx(\"button\", {\n            id: \"login_button\",\n            type: \"submit\",\n            className: \"btn btn-block py-3\",\n            disabled: loading ? true : false,\n            children: loading ? /*#__PURE__*/_jsx(ButtonLoader, {}) : 'REGISTER'\n          })]\n        })\n      })\n    })\n  });\n};\n\nexport default Register;","map":null,"metadata":{},"sourceType":"module"}